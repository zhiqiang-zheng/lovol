(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a077d412"],{"07ac":function(e,t,a){var n=a("23e7"),r=a("6f53").values;n({target:"Object",stat:!0},{values:function(e){return r(e)}})},"0d7e":function(e,t,a){},"25f0":function(e,t,a){"use strict";var n=a("6eeb"),r=a("825a"),i=a("d039"),o=a("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=l.name!=s;(u||p)&&n(RegExp.prototype,s,(function(){var e=r(this),t=String(e.source),a=e.flags,n=String(void 0===a&&e instanceof RegExp&&!("flags"in c)?o.call(e):a);return"/"+t+"/"+n}),{unsafe:!0})},"3fc8":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"h",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return p}));var n=a("b775");function r(){return Object(n["a"])({url:"/accessory-center/query",method:"get"})}function i(e){return Object(n["a"])({url:"/accessory-center/pageQuery",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/accessory-center",method:"post",data:[e]})}function s(e){return Object(n["a"])({url:"/accessory-center",method:"put",data:e})}function c(e){return Object(n["a"])({url:"/accessory-center/".concat(e),method:"delete"})}function l(){return Object(n["a"])({url:"/accessory-center/sparePartsData",method:"get"})}function u(){return Object(n["a"])({url:"/accessory-center/serviceProvidersWarning",method:"get"})}function p(e){return Object(n["a"])({url:"/accessory-center/queryAccessoryInfo",method:"get",params:e})}},4400:function(e,t,a){"use strict";a("9b0f")},4849:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page page-vis"},[a("visualizationMapInfo",{attrs:{type:"partsCenter",visInfo:e.visInfo,geoCoordMapData:e.geoCoordMapData,currentMarker:e.currentMarker},on:{onChangeSelect:e.onChangeSelect}}),a("div",{staticClass:"echarts-list"},[a("div",{staticClass:"echarts-container line"},[a("lineChart")],1),a("div",{staticClass:"echarts-container bar"},[a("barChart",{attrs:{echartsData:e.echartsDataBar}})],1),a("div",{staticClass:"echarts-container pie"},[a("pieChart",{attrs:{echartsData:e.echartsDataPie}})],1)])],1)},r=[],i=(a("d81d"),a("b64b"),a("07ac"),a("9e25")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts-item"},[e._m(0),a("div",{ref:"line2Ref",staticClass:"chart",attrs:{id:"line2"}})])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",[e._v("备件存储水平")]),a("span",{staticClass:"text-right"},[e._v("单位/件")])])}],c=(a("b0c0"),{data:function(){return{echartsData:{xAxisData:["2022.01","2022.02","2022.03","2022.04","2022.05","2022.06"],seriesData:{name:"数据",value:[600,1e3,1200,800,700,1e3]}},myChart:null}},props:{},mounted:function(){this.chartInit("line2"),this.tf_watchDiv(this.$refs.line2Ref)},methods:{chartInit:function(e){var t=this.echartsData,a={grid:{top:"60",bottom:"20",left:"5",right:"22",containLabel:!0},tooltip:{trigger:"axis",backgroundColor:"#fff",padding:[5,10],axisPointer:{lineStyle:{width:0}},textStyle:{color:"#666"}},xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{color:"#666",padding:[10,0,0,0]},data:t.xAxisData},yAxis:{type:"value",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:"#666",padding:[0,5,0,0]}},series:{name:t.seriesData.name,type:"line",smooth:!0,symbol:"emptyCircle",showAllSymbol:!0,symbolSize:8,itemStyle:{color:"rgba(97,194,145,1)"},areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(190,255,217,.5)"},{offset:1,color:"rgba(190,255,217,.05)"}],!1),shadowColor:"rgba(190,255,217,.8)",shadowBlur:20}},data:t.seriesData.value}};this.myChart=this.$echarts.init(document.getElementById(e)),this.myChart.setOption(a)},tf_watchDiv:function(e){var t=this.$elementResizeDetectorMaker(),a=this;t.listenTo(e,(function(){a.$nextTick((function(){a.myChart.resize()}))}))}}}),l=c,u=a("2877"),p=Object(u["a"])(l,o,s,!1,null,null,null),d=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts-item"},[a("div",{staticClass:"title"},[e._v("备件存储量")]),a("div",{ref:"barHRef",staticClass:"chart",attrs:{id:"barH"}})])},m=[],h={data:function(){return{myChart:null}},props:{echartsData:{type:Object,default:function(){return{xAxisData:["服务站1","服务站2","服务站3","服务站4","服务站5"],seriesData:{value:[12e3,5e3,1e4,4500,3e3]}}}}},watch:{echartsData:{handler:function(e){var t=this;e.xAxisData.length>0&&this.$nextTick((function(){t.chartInit("barH"),t.tf_watchDiv(t.$refs.barHRef)}))},deep:!0,immediate:!0}},methods:{chartInit:function(e){var t=this.echartsData,a={grid:{top:"40",bottom:"10",left:"10",right:"30",containLabel:!0},tooltip:{show:!0,trigger:"axis",axisPointer:{lineStyle:{width:0}}},xAxis:{type:"value",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},axisLabel:{color:"#666",padding:[0,0,0,10]}},yAxis:{type:"category",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#666",padding:[0,10,0,0]},data:t.xAxisData},series:{type:"bar",barWidth:12,barGap:"20%",itemStyle:{barBorderRadius:10,color:new this.$echarts.graphic.LinearGradient(0,0,1,1,[{offset:0,color:"rgba(53,191,111,1)"},{offset:.5,color:"rgba(94,168,245,1)"},{offset:1,color:"rgba(240,111,116,1)"}],!1)},data:t.seriesData.value}};this.myChart=this.$echarts.init(document.getElementById(e)),this.myChart.setOption(a)},tf_watchDiv:function(e){var t=this.$elementResizeDetectorMaker(),a=this;t.listenTo(e,(function(){a.$nextTick((function(){a.myChart.resize()}))}))}}},v=h,g=Object(u["a"])(v,f,m,!1,null,null,null),b=g.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"echarts-item"},[a("div",{staticClass:"title"},[e._v("备件存储结构")]),e.echartsData.seriesData.length>0?a("div",{ref:"pie1Ref",staticClass:"chart",attrs:{id:"pie1"}}):e._e()])},C=[],_={data:function(){return{myChart:null}},props:{echartsData:{type:Object,default:function(){return{seriesData:[]}}}},watch:{echartsData:{handler:function(e){var t=this;e.seriesData.length>0&&this.$nextTick((function(){t.chartInit("pie1"),t.tf_watchDiv(t.$refs.pie1Ref)}))},deep:!0,immediate:!0}},methods:{chartInit:function(e){var t=this.echartsData,a={color:["#30C263","#FDB400","#F46E6C","#9070FA","#63A7FB"],grid:{top:"30",bottom:"0",left:"0",right:"30",containLabel:!0},tooltip:{trigger:"item"},legend:{orient:"vertical",right:"50px",bottom:"30px",itemWidth:14,itemHeight:8,itemGap:15,textStyle:{fontSize:14,color:"#666"}},series:{type:"pie",radius:["48%","70%"],center:["30%","60%"],itemStyle:{borderColor:"#fff",borderWidth:12,borderRadius:10},label:{show:!1},labelLine:{show:!1},data:t.seriesData}};this.myChart=this.$echarts.init(document.getElementById(e)),this.myChart.setOption(a)},tf_watchDiv:function(e){var t=this.$elementResizeDetectorMaker(),a=this;t.listenTo(e,(function(){a.$nextTick((function(){a.myChart.resize()}))}))}}},x=_,w=Object(u["a"])(x,y,C,!1,null,null,null),D=w.exports,M=a("3fc8"),O={name:"partsCenterVisualization",data:function(){return{visInfo:{cardInfo:{name:"配送中心数量",number:null},select:{name:"配件中心",options:[]},baseInfo:[{name:"名称",value:"农机配件中心"},{name:"所属大区",value:"中原大区"},{name:"辐射区域",value:"豫北、豫南"},{name:"负责人",value:"厘米"},{name:"联系方式",value:"123147288369"},{name:"备件存储价值",value:"123,097,000元"},{name:"备件存储水平",value:"充足"},{name:"备件存储量",value:"12257414个"},{name:"备件存储结构",value:"完整"}]},echartsDataBar:{xAxisData:[],seriesData:{value:[]}},echartsDataPie:{seriesData:[]},geoCoordMapData:[],currentMarker:[]}},created:function(){var e=this;Object(M["c"])().then((function(t){"true"===t.code&&(t.data.map((function(t){e.visInfo.select.options.push({value:t.id,label:t.accessoryCenterName}),e.geoCoordMapData.push({name:t.city,value:[t.longitude,t.latitude]})})),e.visInfo.baseInfo=[{name:"名称",value:t.data[0].accessoryCenterName},{name:"所属大区",value:t.data[0].belongRegional},{name:"辐射区域",value:t.data[0].radiationArea},{name:"负责人",value:t.data[0].head},{name:"联系方式",value:t.data[0].contactInformation},{name:"备件存储价值",value:t.data[0].spareStorageValue},{name:"备件存储水平",value:"充足"},{name:"备件存储量",value:"12257414个"},{name:"备件存储结构",value:"完整"}],e.visInfo.cardInfo.number=t.data.length,e.currentMarker=[t.data[0].longitude,t.data[0].latitude])})),Object(M["f"])().then((function(t){"true"===t.code&&(e.echartsDataBar.xAxisData=Object.keys(t.data),e.echartsDataBar.seriesData.value=Object.values(t.data))})),Object(M["g"])().then((function(t){if("true"===t.code)for(var a in t.data)e.echartsDataPie.seriesData.push({value:t.data[a],name:a})}))},mounted:function(){this.$forceUpdate()},components:{visualizationMapInfo:i["a"],lineChart:d,barChart:b,pieChart:D},methods:{onChangeSelect:function(e){var t=this;Object(M["e"])({id:e}).then((function(e){"true"===e.code&&(t.visInfo.baseInfo=[{name:"名称",value:e.data.accessoryCenterName},{name:"所属大区",value:e.data.belongRegional},{name:"辐射区域",value:e.data.radiationArea},{name:"负责人",value:e.data.head},{name:"联系方式",value:e.data.contactInformation},{name:"备件存储价值",value:e.data.spareStorageValue},{name:"备件存储水平",value:"充足"},{name:"备件存储量",value:"12257414个"},{name:"备件存储结构",value:"完整"}],t.currentMarker=[e.data.longitude,e.data.latitude])}))}}},S=O,I=(a("4400"),Object(u["a"])(S,n,r,!1,null,"b3ae08a0",null));t["default"]=I.exports},"4c31":function(e,t,a){"use strict";a("0d7e")},"6f53":function(e,t,a){var n=a("83ab"),r=a("df75"),i=a("fc6a"),o=a("d1e7").f,s=function(e){return function(t){var a,s=i(t),c=r(s),l=c.length,u=0,p=[];while(l>u)a=c[u++],n&&!o.call(s,a)||p.push(e?[a,s[a]]:s[a]);return p}};e.exports={entries:s(!0),values:s(!1)}},"9b0f":function(e,t,a){},"9e25":function(e,t,a){"use strict";var n,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mapInfo-container"},[a("div",{ref:"mapRef",staticClass:"map",attrs:{id:"map"}}),a("div",{staticClass:"carInfo"},[a("div",{staticClass:"card",class:e.type},[a("span",[e._v(e._s(e.visInfo.cardInfo.name))]),a("span",[e._v(e._s(e.visInfo.cardInfo.number))])]),a("div",{staticClass:"carBaseInfo"},[a("div",{staticClass:"select"},[a("span",[e._v(e._s(e.visInfo.select.name)+"：")]),a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"medium","popper-append-to-body":!1},on:{change:e.onChangeSelect},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.visInfo.select.options,(function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"base-info"},[e._m(0),a("div",{staticClass:"info-list"},e._l(e.visInfo.baseInfo,(function(t){return a("div",{key:t.id,staticClass:"item"},[a("span",[e._v(e._s(t.name))]),"rate"!==t.type?a("span",[e._v(e._s(t.value))]):a("span",[a("el-rate",{staticClass:"rate-default",attrs:{disabled:"","disabled-void-icon-class":"el-icon-star-off"},model:{value:e.rateValue,callback:function(t){e.rateValue=t},expression:"rateValue"}})],1)])})),0)])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",[e._v("基础信息")]),a("i",{staticClass:"el-icon-arrow-right"})])}],o=(a("d3b7"),a("159b"),a("b0c0"),a("d81d"),a("25f0"),a("313e"));function s(e,t){this._bmap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t,this._projection=new BMap.MercatorProjection}function c(e,t){return t=t||[0,0],o["util"].map([0,1],(function(a){var n=t[a],r=e[a]/2,i=[],o=[];return i[a]=n-r,o[a]=n+r,i[1-a]=o[1-a]=t[1-a],Math.abs(this.dataToPoint(i)[a]-this.dataToPoint(o)[a])}),this)}function l(){function e(e){this._root=e}return e.prototype=new BMap.Overlay,e.prototype.initialize=function(e){return e.getPanes().labelPane.appendChild(this._root),this._root},e.prototype.draw=function(){},e}s.prototype.dimensions=["lng","lat"],s.prototype.setZoom=function(e){this._zoom=e},s.prototype.setCenter=function(e){this._center=this._projection.lngLatToPoint(new BMap.Point(e[0],e[1]))},s.prototype.setMapOffset=function(e){this._mapOffset=e},s.prototype.getBMap=function(){return this._bmap},s.prototype.dataToPoint=function(e){var t=new BMap.Point(e[0],e[1]),a=this._bmap.pointToOverlayPixel(t),n=this._mapOffset;return[a.x-n[0],a.y-n[1]]},s.prototype.pointToData=function(e){var t=this._mapOffset;return e=this._bmap.overlayPixelToPoint({x:e[0]+t[0],y:e[1]+t[1]}),[e.lng,e.lat]},s.prototype.getViewRect=function(){var e=this._api;return new o["graphic"].BoundingRect(0,0,e.getWidth(),e.getHeight())},s.prototype.getRoamTransform=function(){return o["matrix"].create()},s.prototype.prepareCustoms=function(){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:o["util"].bind(this.dataToPoint,this),size:o["util"].bind(c,this)}}},s.dimensions=s.prototype.dimensions,s.create=function(e,t){var a,r=t.getDom();e.eachComponent("bmap",(function(e){var i,c=t.getZr().painter,u=c.getViewportRoot();if("undefined"===typeof BMap)throw new Error("BMap api is not loaded");if(n=n||l(),a)throw new Error("Only one bmap component can exist");if(!e.__bmap){var p=r.querySelector(".ec-extension-bmap");p&&(u.style.left="0px",u.style.top="0px",r.removeChild(p)),p=document.createElement("div"),p.className="ec-extension-bmap",p.style.cssText="position:absolute;width:100%;height:100%",r.appendChild(p);var d=e.get("mapOptions");d&&(d=o["util"].clone(d),delete d.mapType),i=e.__bmap=new BMap.Map(p,d);var f=new n(u);i.addOverlay(f),c.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}i=e.__bmap;var m=e.get("center"),h=e.get("zoom");if(m&&h){var v=i.getCenter(),g=i.getZoom(),b=e.centerOrZoomChanged([v.lng,v.lat],g);if(b){var y=new BMap.Point(m[0],m[1]);i.centerAndZoom(y,h)}}a=new s(i,t),a.setMapOffset(e.__mapOffset||[0,0]),a.setZoom(h),a.setCenter(m),e.coordinateSystem=a})),e.eachSeries((function(e){"bmap"===e.get("coordinateSystem")&&(e.coordinateSystem=a)}))};var u=s;function p(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}o["extendComponentModel"]({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(e,t){this.option.center=e,this.option.zoom=t},centerOrZoomChanged:function(e,t){var a=this.option;return!(p(e,a.center)&&t===a.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}});function d(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}o["extendComponentView"]({type:"bmap",render:function(e,t,a){var n=!0,r=e.getBMap(),i=a.getZr().painter.getViewportRoot(),s=e.coordinateSystem,c=function(t,r){if(!n){var o=i.parentNode.parentNode.parentNode,c=[-parseInt(o.style.left,10)||0,-parseInt(o.style.top,10)||0],l=i.style,u=c[0]+"px",p=c[1]+"px";l.left!==u&&(l.left=u),l.top!==p&&(l.top=p),s.setMapOffset(c),e.__mapOffset=c,a.dispatchAction({type:"bmapRoam",animation:{duration:0}})}};function l(){n||a.dispatchAction({type:"bmapRoam",animation:{duration:0}})}r.removeEventListener("moving",this._oldMoveHandler),r.removeEventListener("moveend",this._oldMoveHandler),r.removeEventListener("zoomend",this._oldZoomEndHandler),r.addEventListener("moving",c),r.addEventListener("moveend",c),r.addEventListener("zoomend",l),this._oldMoveHandler=c,this._oldZoomEndHandler=l;var u=e.get("roam");u&&"scale"!==u?r.enableDragging():r.disableDragging(),u&&"move"!==u?(r.enableScrollWheelZoom(),r.enableDoubleClickZoom(),r.enablePinchToZoom()):(r.disableScrollWheelZoom(),r.disableDoubleClickZoom(),r.disablePinchToZoom());var p=e.__mapStyle,f=e.get("mapStyle")||{},m=JSON.stringify(f);JSON.stringify(p)!==m&&(d(f)||r.setMapStyle(o["util"].clone(f)),e.__mapStyle=JSON.parse(m));var h=e.__mapStyle2,v=e.get("mapStyleV2")||{},g=JSON.stringify(v);JSON.stringify(h)!==g&&(d(v)||r.setMapStyleV2(o["util"].clone(v)),e.__mapStyle2=JSON.parse(g)),n=!1}});o["registerCoordinateSystem"]("bmap",u),o["registerAction"]({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},(function(e,t){t.eachComponent("bmap",(function(e){var t=e.getBMap(),a=t.getCenter();e.setCenterAndZoom([a.lng,a.lat],t.getZoom())}))}));var f={name:"visualizationMapInfo",data:function(){return{myChart:null,currentMarkerTemp:[],selectValue:"",rateValue:0}},mounted:function(){this.$forceUpdate()},props:{type:{type:String,default:"serviceCar"},visInfo:{type:Object,default:function(){return{cardInfo:{name:"服务车数量",number:2409},select:{name:"服务车",options:[]},baseInfo:[{name:"服务车编号",value:"SVJ087080"},{name:"服务车型号",value:"宝马X6"},{name:"服务车车牌",value:"粤G·480888"},{name:"服务商名称",value:"厘米那那中欧集团股份有限公司"},{name:"所属市场部",value:"海上市场部"},{name:"技能等级",value:2,type:"rate"},{name:"服务车数量",value:"123"}]}}},geoCoordMapData:{type:Array,default:function(){return[{name:"海门",value:[121.15,31.89]},{name:"鄂尔多斯",value:[109.781327,39.608266]},{name:"招远",value:[120.38,37.35]}]}},currentMarker:{type:Array}},watch:{geoCoordMapData:{handler:function(e){var t=this;e.length>0&&this.$nextTick((function(){t.initMap("map"),t.$forceUpdate()}))},immediate:!0,deep:!0},"visInfo.baseInfo":{handler:function(e){var t=this;e.length>0&&this.$nextTick((function(){e.forEach((function(e){("技能等级"===e.name||"评价等级"===e.name)&&e.value>0&&(t.rateValue=e.value)})),t.tf_marker(),t.$forceUpdate()}))},deep:!0,immediate:!0},"visInfo.select.options":{handler:function(e){var t=this;e.length>0&&this.$nextTick((function(){t.selectValue=e[0].value,t.$forceUpdate()}))},immediate:!0,deep:!0}},methods:{onChangeSelect:function(e){this.$emit("onChangeSelect",e)},initMap:function(e){var t=this,a={tooltip:{trigger:"item",formatter:function(e){return e.name}},bmap:{center:[125,31],zoom:5,roam:!1,mapOptions:{enableMapClick:!1}},series:{type:"effectScatter",coordinateSystem:"bmap",rippleEffect:{brushType:"stroke"},itemStyle:{normal:{color:"#00FF7C",shadowBlur:10,shadowColor:"#fff"}},data:this.geoCoordMapData}};this.myChart=this.$echarts.init(document.getElementById(e)),this.myChart.setOption(a),setTimeout((function(){t.tf_marker()}),100)},tf_marker:function(){var e=this,t=this.myChart.getModel().getComponent("bmap").getBMap();t.getOverlays().map((function(a){"[object Marker]"===a.toString()&&a.getPosition().lng===e.currentMarkerTemp[0]&&a.getPosition().lat===e.currentMarkerTemp[1]&&t.removeOverlay(a)}));var a=new BMap.Point(this.currentMarker[0],this.currentMarker[1]),n=new BMap.Marker(a);t.addOverlay(n),this.currentMarkerTemp=this.currentMarker}}},m=f,h=(a("4c31"),a("2877")),v=Object(h["a"])(m,r,i,!1,null,null,null);t["a"]=v.exports}}]);