(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83b2e452"],{"15fd":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("a4d3"),r("b64b");function a(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function n(e,t){if(null==e)return{};var r,n,o=a(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}},"3fc8":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"h",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"g",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"e",(function(){return p}));var a=r("b775");function n(){return Object(a["a"])({url:"/accessory-center/query",method:"get"})}function o(e){return Object(a["a"])({url:"/accessory-center/pageQuery",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/accessory-center",method:"post",data:[e]})}function s(e){return Object(a["a"])({url:"/accessory-center",method:"put",data:e})}function i(e){return Object(a["a"])({url:"/accessory-center/".concat(e),method:"delete"})}function u(){return Object(a["a"])({url:"/accessory-center/sparePartsData",method:"get"})}function c(){return Object(a["a"])({url:"/accessory-center/serviceProvidersWarning",method:"get"})}function p(e){return Object(a["a"])({url:"/accessory-center/queryAccessoryInfo",method:"get",params:e})}},"57fc":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{background:"",small:"",total:e.pageInfo.total,"current-page":e.pageInfo.currentPage,"page-size":e.pageInfo.pageSize,"page-sizes":[10,20,50,100],layout:"total, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange}})],1)},n=[],o={name:"pagination",props:{pageInfo:{type:Object,default:null}},methods:{handleCurrentChange:function(e){this.$emit("onPagesChange",e)}}},l=o,s=r("2877"),i=Object(s["a"])(l,a,n,!1,null,null,null);t["a"]=i.exports},adfc:function(e,t,r){"use strict";r("e8c5")},d79c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("el-button",{staticClass:"btn m-b20",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.onNewAdd}},[e._v("新增")]),r("el-form",{staticClass:"form",attrs:{inline:!0,model:e.form}},[e._l(e.tableColumns,(function(t,a){return[a<2?r("el-form-item",{staticClass:"m-r20",attrs:{label:t.label+"："}},[r("el-input",{attrs:{placeholder:"请输入"+t.label,clearable:""},model:{value:e.form[t.prop],callback:function(r){e.$set(e.form,t.prop,r)},expression:"form[v.prop]"}})],1):e._e()]})),r("el-form-item",{staticClass:"p-l20"},[r("el-button",{staticClass:"btn",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.onQuery}},[e._v("查询")])],1)],2),r("el-table",{staticClass:"table",attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"seq",label:"序号",width:"60",align:"center"}}),e._l(e.tableColumns,(function(e){return r("el-table-column",{attrs:{prop:e.prop,label:e.label,width:e.width,"min-width":e.minWidth}})})),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(r){return e.onEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.onDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),r("pagination",{attrs:{pageInfo:e.pageInfo},on:{onPagesChange:e.onPagesChange}}),e.showModal?r("dialogModal",{staticClass:"dialogModal",attrs:{title:e.modalTitle,width:"50%",top:"10vh"},on:{modalCancel:function(t){e.showModal=!1},modalConfirm:e.onConfirm}},[r("el-form",{ref:"ruleForm",staticClass:"modal-form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"143px"}},[e._l(e.ruleFormItem,(function(t,a){return[r("div",a>0?{staticClass:"modal-tit p-t20"}:{staticClass:"modal-tit"},[e._v(e._s(t.title))]),r("el-row",[e._l(t.formItem,(function(t,n){return[0===a?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:t.label+"：",prop:t.prop}},["area"===t.prop?r("el-cascader",{attrs:{options:e.options,size:"large",placeholder:"请选择省市区",clearable:""},on:{change:e.onAreaChange},model:{value:e.ruleForm[t.prop],callback:function(r){e.$set(e.ruleForm,t.prop,r)},expression:"ruleForm[k.prop]"}}):"number"===t.type?r("el-input",{attrs:{placeholder:"请输入"+t.label,oninput:"value=value.replace(/[^\\d.]/g,'')",clearable:""},on:{blur:function(r){return e.inputBlur(r,t.prop)}},model:{value:e.ruleForm[t.prop],callback:function(r){e.$set(e.ruleForm,t.prop,r)},expression:"ruleForm[k.prop]"}}):r("el-input",{attrs:{clearable:"",placeholder:"请输入"+t.label},model:{value:e.ruleForm[t.prop],callback:function(r){e.$set(e.ruleForm,t.prop,r)},expression:"ruleForm[k.prop]"}})],1)],1):r("el-row",[t.show?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:t.label+"：",prop:t.prop}},[r("el-input",{staticClass:"sparePart-info",attrs:{oninput:"value=value.replace(/[^\\d.]/g,'')",placeholder:"请输入备件名称",clearable:""},on:{blur:function(r){return e.inputBlur(r,t.prop)}},model:{value:e.ruleForm[t.prop],callback:function(r){e.$set(e.ruleForm,t.prop,r)},expression:"ruleForm[k.prop]"}},[r("span",{staticClass:"icon",attrs:{slot:"append"},slot:"append"},[r("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return e.onAddSparePart(n+1)}}}),n>0?r("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.onDeleteSparePart(n)}}}):e._e()])])],1)],1):e._e()],1)]}))],2)]}))],2)],1):e._e()],1)},n=[],o=r("15fd"),l=(r("d3b7"),r("159b"),r("b64b"),r("ef6c")),s=r("57fc"),i=r("bf46"),u=r("3fc8"),c=["area"],p={name:"partsCenterQuery",data:function(){return{form:{accessoryCenterName:"",accessoryCenterNo:""},tableColumns:[],tableData:[],pageInfo:{total:0,currentPage:1,pageSize:10},showModal:!1,modalTitle:"",ruleForm:{accessoryCenterNo:"",accessoryCenterName:"",belongRegional:"",radiationArea:"",head:"",contactInformation:"",area:null,address:"",longitude:"",latitude:"",spareStorageValue:"",province:"",city:"",county:"",spareaQuantity:null,sparebQuantity:null,sparecQuantity:null,sparedQuantity:null,spareeQuantity:null,sparefQuantity:null},rules:{accessoryCenterNo:[{required:!0,message:"请输入配件中心编号",trigger:"blur"}],accessoryCenterName:[{required:!0,message:"请输入配件中心名称",trigger:"blur"}],belongRegional:[{required:!0,message:"请输入所属大区",trigger:"blur"}],radiationArea:[{required:!0,message:"请输入辐射区域",trigger:"blur"}],head:[{required:!0,message:"请输入负责人",trigger:"blur"}],contactInformation:[{required:!0,message:"请输入联系方式",trigger:"blur"}],area:[{required:!0,message:"请选择省市区",trigger:"change"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],longitude:[{type:"number",required:!0,message:"请输入经度",trigger:"blur"}],latitude:[{type:"number",required:!0,message:"请输入纬度",trigger:"blur"}],spareStorageValue:[{required:!0,message:"请输入备件储存价值",trigger:"blur"}],spareaQuantity:[{required:!0,message:"请输入备件名称",trigger:"blur"}],sparebQuantity:[{required:!0,message:"请输入备件名称",trigger:"blur"}],sparecQuantity:[{required:!0,message:"请输入备件名称",trigger:"blur"}],sparedQuantity:[{required:!0,message:"请输入备件名称",trigger:"blur"}],spareeQuantity:[{required:!0,message:"请输入备件名称",trigger:"blur"}],sparefQuantity:[{required:!0,message:"请输入备件名称",trigger:"blur"}]},ruleFormItem:[],options:l["regionData"],confirmType:null,rowIdTemp:null}},created:function(){this.tableColumns=[{prop:"accessoryCenterName",label:"配件中心名称",minWidth:"100"},{prop:"accessoryCenterNo",label:"配件中心编号",minWidth:"100"},{prop:"belongRegional",label:"所属大区",minWidth:"100"},{prop:"head",label:"负责人",minWidth:"100"},{prop:"contactInformation",label:"联系方式",minWidth:"100"},{prop:"address",label:"地址",minWidth:"100"},{prop:"spareStorageValue",label:"备件储存价值/万元",minWidth:"100"}],this.ruleFormItem=[{title:"基础信息",formItem:[{prop:"accessoryCenterNo",label:"配件中心编号"},{prop:"accessoryCenterName",label:"配件中心名称"},{prop:"belongRegional",label:"所属大区"},{prop:"radiationArea",label:"辐射区域"},{prop:"head",label:"负责人"},{prop:"contactInformation",label:"联系方式"},{prop:"area",label:"省市区"},{prop:"address",label:"地址"},{prop:"longitude",label:"经度",type:"number"},{prop:"latitude",label:"纬度",type:"number"},{prop:"spareStorageValue",label:"备件储存价值"}]},{title:"备件信息",formItem:[{prop:"spareaQuantity",label:"典型备件A数量",show:!0},{prop:"sparebQuantity",label:"典型备件B数量",show:!0},{prop:"sparecQuantity",label:"典型备件C数量",show:!1},{prop:"sparedQuantity",label:"典型备件D数量",show:!1},{prop:"spareeQuantity",label:"典型备件E数量",show:!1},{prop:"sparefQuantity",label:"典型备件F数量",show:!1}]}],this.initData()},components:{pagination:s["a"],dialogModal:i["a"]},methods:{initData:function(){var e=this,t={page:this.pageInfo.currentPage,size:this.pageInfo.pageSize,accessoryCenterName:this.form.accessoryCenterName,accessoryCenterNo:this.form.accessoryCenterNo};Object(u["d"])(t).then((function(t){e.tableData=t.data.list,e.pageInfo.total=t.data.total}))},onQuery:function(){this.initData()},onNewAdd:function(){this.modalTitle="新增配件中心",this.showModal=!0,this.confirmType="add",this.ruleForm={accessoryCenterNo:"",accessoryCenterName:"",belongRegional:"",radiationArea:"",head:"",contactInformation:"",area:null,address:"",longitude:"",latitude:"",spareStorageValue:"",province:"",city:"",county:"",spareaQuantity:null,sparebQuantity:null,sparecQuantity:null,sparedQuantity:null,spareeQuantity:null,sparefQuantity:null},this.ruleFormItem[1].formItem=[{prop:"spareaQuantity",label:"典型备件A数量",show:!0},{prop:"sparebQuantity",label:"典型备件B数量",show:!0},{prop:"sparecQuantity",label:"典型备件C数量",show:!1},{prop:"sparedQuantity",label:"典型备件D数量",show:!1},{prop:"spareeQuantity",label:"典型备件E数量",show:!1},{prop:"sparefQuantity",label:"典型备件F数量",show:!1}]},onEdit:function(e,t){var r=this;this.modalTitle="编辑配件中心",this.showModal=!0,this.confirmType="edit",this.rowIdTemp=t.id,Object.keys(this.ruleForm).forEach((function(e){r.ruleForm[e]=t[e]})),this.ruleForm.area=[l["TextToCode"][t.province].code,l["TextToCode"][t.province][t.city].code,l["TextToCode"][t.province][t.city][t.county].code],this.ruleFormItem[1].formItem=[{prop:"spareaQuantity",label:"典型备件A数量",show:!0},{prop:"sparebQuantity",label:"典型备件B数量",show:!0},{prop:"sparecQuantity",label:"典型备件C数量",show:!1},{prop:"sparedQuantity",label:"典型备件D数量",show:!1},{prop:"spareeQuantity",label:"典型备件E数量",show:!1},{prop:"sparefQuantity",label:"典型备件F数量",show:!1}]},onDelete:function(e,t){var r=this;this.$confirm("是否确认删除此配件中心?","删除",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){Object(u["a"])(t.id).then((function(e){"true"===e.code&&(r.$message({type:"success",message:e.data}),r.initData())}))})).catch((function(){}))},onPagesChange:function(e){this.pageInfo.currentPage=e,this.initData()},onConfirm:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var r=e.ruleForm,a=(r.area,Object(o["a"])(r,c));"add"===e.confirmType&&Object(u["h"])(a).then((function(t){"true"===t.code&&(e.$message({type:"success",message:"新增成功"}),e.initData())})),"edit"===e.confirmType&&(a.id=e.rowIdTemp,Object(u["b"])(a).then((function(t){"true"===t.code&&(e.$message({type:"success",message:t.data}),e.initData())}))),e.showModal=!1}))},onAreaChange:function(e){this.ruleForm.province=l["CodeToText"][e[0]],this.ruleForm.city=l["CodeToText"][e[1]],this.ruleForm.county=l["CodeToText"][e[2]]},inputBlur:function(e,t){e.target.value&&(this.ruleForm[t]=parseFloat(e.target.value))},onAddSparePart:function(e){e>5?this.$message({type:"warning",message:"最多只允许增加5个！"}):this.$set(this.ruleFormItem[1].formItem[e],"show",!0)},onDeleteSparePart:function(e){this.$set(this.ruleFormItem[1].formItem[e],"show",!1)}}},d=p,m=(r("adfc"),r("2877")),b=Object(m["a"])(d,a,n,!1,null,"52627a0a",null);t["default"]=b.exports},e8c5:function(e,t,r){}}]);